#

## 业务流程

推广 --> 咨询 --> 销售  --> 案件服务 --> 结款
utm_source 流量来源
utm_medium 流量展现媒介
utm_term     推广的关键词
utm_campaign 推广活动的名字，什么推广活动获得的流量
utm_content  推广的内容

推广由运营部门负责
咨询主要由法猫猫网站和咨询机器人负责

### 法猫猫

* 目标用户在百度等投放平台进行搜索时，如果匹配到关键字则置顶法猫猫官网
* 用户进入官网，页面引导用户与机器人进行对话
* 问答完成后，引导用户留下手机号等联系方式
* 为用户生成咨询报告，总结用户回答的问题以及所涉及的法律法规
* 根据案情复杂程度为用户推荐与公司合作的律所或个人律师

fmm-client/server famaomao-backend  web-cls中  fmm-client  fmm-backend



| 功能           |  路径        | 流程           |
|:---            |:----    |   :----       |
| 启动           |          | pm2.config.js -> ./server/index.js |
| 微信公众号关注   | /wxpub     |./server/route/wxpub.js  |
| 微信登陆        | /wxAuth     | ./server/route/wxAuth.js |
|常见劳动纠纷      | /solutions/*  | pages/solutions/*.vue|
|免费咨询 机器人   |  /chat        |shared/components/chatbot / famaomao-chatbot  famaomao-h5 通过 route/h5 与 famaomao-chatbot env.CHATBOT_URL 交互|
|m端 智能咨询     | ／robotChat   |pages/robotChat      env.CHAT_HOST 企法侠 lawhero-home |
| 机器人          |  ／oneschat    | nginx 转发给 ones-chatbot |
| 赔偿预估       |  /reservation | pages/reservation.vue 由 api/businessApi 转给 route/h5.js 中转给 CHATBOT 服务器 env.CHATBOT_URL|
| 电话咨询       |     是法律具体服务的一种，见下|
| 法律服务页面   | /lawProduct  |pages/lawProduct.vue 由 route/fmmBackend 中的路由经 util/request 中转给 famaomao-backend env.FMM_BACKEND|
| 具体服务      |  /service/*  | service/_id/index.vue，同上|
| 法律知识页面   | /all | pages/all.vue 经由  lawsKnowledgeApi.js 转给 fmmBackend.js 在转给 famaomao-backend|
| 经典案例      |/classicalCases | pages/classicCases.vue api/businessApi 转给 fmmBackend 再转给 famaomao-backend web-cls 中 fmm-backend 部署|
| 法律百科      |／question     | pages/question
| 律师推荐      | /lawyerLists  |

用户中心 /userCenter pages/userCenter
    上传资料 route/upload 中转给文件管理服务器 web-cls 中的 files-manager 部署



### 法立方

销售由销售部门负责，案件服务由服务部门负责，对应 famaomao-fff / famaomao-backend

权限管理  views/AuthorityManage.vue      route/adminUser route/adminRole

案源管理  views/CaseSourceManage.vue     route/caseSource

案源数据  views/UserStatistic.vue        经由 api/caseSource 转发给 ruotes/userStatistic 和 ruote/statistic

商机配置  views/BussinessManage.vue      api/bussiness   转发给  ruotes/views

商机分配  views/BussinessAssignment.vue  api/employeeGroup 转发给 routes/employeeGroup 和 ruotes/singedMan

案件管理  views/ProfileManage.vue      routes/profile

案件数据  views/Statistic.vue

订单管理  views/OrderManage.vue        routes/order

---

### 法狗狗 · 万息智慧营销平台

* 宣传网站，与律所或律师进行合作
* 对应 1s-official-website

---

### 万息智能管理平台

    * 前端：ones-lead-fe
    * 后端：ones-lead-server

## 项目结构

## 通用后端 famaomao-backend

|功能         |        API        | 实现  |
|：------    | ：------------- | ：------|
|路由        |

* 法律产品   controller/prod/fmmLegalProduct   Domain/LegalProduct   /service/*
* 订单      controller/prod/fmmOrder         Domain/Order
* 法律知识   controller/prod/legaKnowledge    Domain/SeoContent   ／post/*
* 知识分类   controller/prod/legaKnowledge    Domain/SeoContent   /all /
* 热点        同上
* 搜索文章     controller/prod/keyword           Domain/SeoContent
* 用户案例   controller/prod/
* 文章        controller/prod/article             Domain/Article
* 问题        controller/prod/legalQuestion       Domain/Article
* 问题标签     controller/prod/legalQuestionTag    Domain/Article
* 经典案例     controller/prod/classicCase         Domain/ClassicCase  /classicCases
* 支付        controller/prod/transaction         Domain/Transaction
* 咨询报告    controller/prod/analysisReport       Domain/AnalysisReport
* 法律法规    controller/prod/lawsAndRegulation     Domain/SeoContent
* 案源       controller/prod/caseSource.js         Domain/Profile

---

## 代码库与云端与超链接

|  代码库   |  云端       | 超链接 |
| :---       | :---      | :--- |
|fmm-client | fmm-client | famaomao.com.cn |
|           |            | www.famaomao.com.cn |
|           |           | vip.famaomao.com.cn |
|           |           | m.famaomao.com.cn |
|           |           | t.fagougou.com |
|famaomao-fff | fmmfff  | flf.famaomao.com.cn |
|famaomao-backend | fmm-backend | 集群内访问 |
|famaomao-chatbot | famaomao-h5 | 集群内访问 |
|ones-chatbot      | ones-chatbot |t.zhizelaw.com|
|ones-lead-fe     | ones-lead-fe | ones.fagougou.com|
|ones-lead-sys   | ones-lead-sys-production | ones-sys.fagougou.com|
|ones-lead-server | ones-lead-server | ones-api.fagougou.com |
|1s-offical-website| ones-offical-website|onesense.net|
|                   |                   | www.onsense.net |

~~~**调试服务器 namespace-staging**
fmm-client -> famaomao-homepage-mobile -> staging-www.famaomao.com
                                          staging-m.famaomao.com
famaomao-chatbot    ->  famaomao-h5    -> staging-h5.famaomao.com
famaomao-fff    -> fff                 -> staging-flf.famaomao.com
~~~

**调试服务器 namespace-release**
fmm-client -> famaomao-homepage-mobile -> beta.famaomao.com.cn
                                          beta-m.famaomao.com.cn
famaomao-chatbot    ->  famaomao-h5    -> beta-h5.famaomao.com.cn
famaomao-fff    -> fff                 -> beta-flf.famaomao.com.cn

ones-lead-fe    -> ones-lead-fe        -> beta-ones.fagougou.com
ones-lead-sys   -> ones-lead-sys       -> beta-ones-sys.fagougou.com
ones-lead-server -> ones-lead-server   -> beta-ones-api.fagougou.com
